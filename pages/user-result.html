<!doctype html>
<html lang="ja">
<head>
    <title>魔道杯データ　個人成績</title>
    <!-- 必要なメタタグ -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" href="https://i-cf.quiz.colopl.jp/img/card/small/card_05302_0.png">
    <!-- CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link href="../css/custom.css" rel="stylesheet" crossorigin="anonymous">
    <!-- CSS -->
</head>
<body class="pb-5">
    <div class="wrap noselectable">
        <div id="loader-bg">
            <img src="../img/materials/Loading.gif">
        </div>

        <div class="container-fluid p-0">
            <div class="row g-0">

                <div class="col-12" id="header">
                </div>
                <nav class="topbar border-wiz border-top border-bottom border-top p-2 mb-2" aria-label="Breadcrumb" style="--bs-breadcrumb-divider: '>';">
                    <ol class="breadcrumb mb-1">
                        <li class="breadcrumb-item"><a href="../index.html">ホーム</a></li>
                        <li class="breadcrumb-item active Event_this_page" aria-current="page"></li>
                    </ol>
                </nav>

                <!-- 基本情報 -->
                <div class="col-12 p-2 Info_Area"></div>

                <div class="col-12 p-2 Info_Area_Grade"></div>

                <div class="col-12 p-2">
                    <hr>
                </div>

                <div class="col-12 p-2 text-center">
                    <div class="bg-film bg-gradient rounded py-2 mb-0 overall">
                        総合　<span class="fw-bold count_info"></span>件のデータが見つかりました。<br>
                        <span class="fw-bold count_info_start"></span>件目～<span class="fw-bold count_info_end"></span>件目を表示中
                    </div>
                </div>

                <!-- ページネーション -->
                <nav class="my-2 overall" aria-label="pagination">
                    <ul class="pagination justify-content-center m-0">
                        <li class="page-item pg-first" value="0">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-bar-left"></i></button>
                        </li>
                        <li class="page-item pg-prev" value="1">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-left"></i></button>
                        </li>
                        <li class="page-item active" aria-current="page" value="-1">
                            <span class="page-link current-pg bg-wiz-blue bg-gradient border-wiz">92 / 92</span>
                        </li>
                        <li class="page-item pg-next" value="2">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-right"></i></button>
                        </li>
                        <li class="page-item pg-last" value="3">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-bar-right"></i></button>
                        </li>
                    </ul>
                </nav>

                <!-- 総合ボード -->
                <div class="col-12 p-2 Board_Area"></div>

                <!-- 詳細モーダル 総合ボード -->
                <div class="col-12 Modal_Area_Overall"></div>

                <div class="col-12 p-2">
                    <hr>
                </div>

                <div class="col-12 p-2 text-center">
                    <div class="bg-film bg-gradient rounded py-2 mb-0 daily">
                        全体デイリー　<span class="fw-bold count_info"></span>件のデータが見つかりました。<br>
                        <span class="fw-bold count_info_start"></span>件目～<span class="fw-bold count_info_end"></span>件目を表示中
                    </div>
                </div>

                <!-- ページネーション -->
                <nav class="my-2 daily" aria-label="pagination">
                    <ul class="pagination justify-content-center m-0">
                        <li class="page-item pg-first" value="0">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-bar-left"></i></button>
                        </li>
                        <li class="page-item pg-prev" value="1">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-left"></i></button>
                        </li>
                        <li class="page-item active" aria-current="page" value="-1">
                            <span class="page-link current-pg bg-wiz-blue bg-gradient border-wiz">92 / 92</span>
                        </li>
                        <li class="page-item pg-next" value="2">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-right"></i></button>
                        </li>
                        <li class="page-item pg-last" value="3">
                            <button type="button" class="page-link bg-wiz bg-gradient border-wiz text-white px-3"><i class="bi bi-chevron-bar-right"></i></button>
                        </li>
                    </ul>
                </nav>

                <!-- 全体デイリー -->
                <div class="col-12 p-2 Daily_Area"></div>

                <!-- 詳細モーダル 全体デイリー -->
                <div class="col-12 Modal_Area_Daily"></div>

                <div class="col-12 p-2">
                    <hr>
                </div>

                <!-- デッキ -->
                <div class="col-12 p-2 Deck_Area"></div>

                <!-- 詳細モーダル デッキ -->
                <div class="col-12 Modal_Area_Deck"></div>


                <div class="col-12 footer" id="footer">
                </div>

            </div>
        </div>
    </div>
    <div id="modal-html2canvas-overall"></div>
    <div id="modal-html2canvas-daily"></div>

    <!-- JavaScript -->
    <script src="../js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="../js/jquery-3.6.0.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.5/dist/html2canvas.min.js"></script>
    <script src="../js/lodash.min.js"></script>
    <script src="../js/Board.js"></script>
    <script src="../js/Daily.js"></script>
    <script src="../js/Deck.js"></script>
    <script src="../js/user_result.js"></script>
    <script src="../js/data-ready.js"></script>
    <script src="../js/grade-calc.js"></script>
    <script src="../js/common.js"></script>

    <script src="../data/overall_data.js"></script>
    <script src="../data/daily_data.js"></script>
    <script src="../data/deck_data.js"></script>
    <script src="../data/cup_data.js"></script>
    <!-- JavaScript -->
    <script>
        $(function () {
            $('#header').load('../component/header.html');
            $('#sidemenu').load('../component/sidemenu.html');
            $('#footer').load('../component/footer.html');
        });
    </script>
    <script>
        $(window).on('load', function () {
            $('#loader-bg').fadeOut();
        });
    </script>
    <script>
        $(function () {
            first_o = true;
        });
        //画像生成
        function createImg_overall(num) {

            if (first_o) {
                $('.loadingImg-overall').removeClass('d-none');
                $('.loadedImg-overall').addClass('d-none');
                $("[id^='overall-canvas-']").removeClass('d-none');
                $('#img-share-overall').addClass('disabled');

                setTimeout(function () {
                    let a = [],
                        b = [];
                    for (let i = 0; i < num; i++) {
                        a[i] = document.querySelector('#overall-canvas-' + i);
                        b[i] = document.querySelector('#overall-canvas-output-' + i);
                    };
                    console.log(a,b)
                    //const download = document.querySelector('#overall-canvas-download');

                    for (let i = 0; i < num; i++) {
                        html2canvas(a[i], {
                            backgroundColor: "rgba(30,0,0,0.9)",
                            scrollX: 0,
                            scrollY: 0,
                            allowTaint: true,
                            proxy: true,
                            useCORS: true,
                            logging: false,
                        }).then(canvas => {
                            b[i].src = canvas.toDataURL();
                            //download.href = canvas.toDataURL("image/png");
                            //download.download = "result-overall.png";
                        });
                    };

                    $('.loadingImg-overall').addClass('d-none');
                    $('.loadedImg-overall').removeClass('d-none');
                    for (let i = 0; i < num; i++) {
                    $(`#overall-canvas-${i}`).addClass('d-none');
                    };
                    $('#img-share-overall').removeClass('disabled');
                }, 1000)
                //first_o = false;
            };
        };
    </script>
    <script>
        $(function () {
            first_d = true;
        });
        //画像生成
        function createImg_daily(num) {

            if (first_o) {
                $('.loadingImg-daily').removeClass('d-none');
                $('.loadedImg-daily').addClass('d-none');
                $("[id^='daily-canvas-']").removeClass('d-none');
                $('#img-share-daily').addClass('disabled');

                setTimeout(function () {
                    let a = [],
                        b = [];
                    for (let i = 0; i < num; i++) {
                        a[i] = document.querySelector('#daily-canvas-' + i);
                        b[i] = document.querySelector('#daily-canvas-output-' + i);
                    };
                    console.log(a,b)
                    //const download = document.querySelector('#daily-canvas-download');

                    for (let i = 0; i < num; i++) {
                        html2canvas(a[i], {
                            backgroundColor: "rgba(30,0,0,0.9)",
                            scrollX: 0,
                            scrollY: 0,
                            allowTaint: true,
                            proxy: true,
                            useCORS: true,
                            logging: false,
                        }).then(canvas => {
                            b[i].src = canvas.toDataURL();
                            //download.href = canvas.toDataURL("image/png");
                            //download.download = "result-daily.png";
                        });
                    };

                    $('.loadingImg-daily').addClass('d-none');
                    $('.loadedImg-daily').removeClass('d-none');
                    for (let i = 0; i < num; i++) {
                    $(`#daily-canvas-${i}`).addClass('d-none');
                    };
                    $('#img-share-daily').removeClass('disabled');
                }, 1000)
                //first_d = false;
            };
        };
    </script>
    <!-- JavaScript -->

</body>
</html>
